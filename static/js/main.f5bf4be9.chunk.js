(this["webpackJsonpactivity-trends"]=this["webpackJsonpactivity-trends"]||[]).push([[0],{110:function(e,t,a){e.exports={header:"Header_header__2ZtSD",name:"Header_name__1NJUs",github:"Header_github__1sRkW",link:"Header_link__NFLNH"}},111:function(e,t,a){e.exports={label:"AreaTooltip_label__g5udc",value:"AreaTooltip_value__3hQFC",wrapper:"AreaTooltip_wrapper__HjMe3"}},112:function(e,t,a){e.exports={label:"BarTooltip_label__3CJlt",value:"BarTooltip_value__3Ugsc",wrapper:"BarTooltip_wrapper__LbuyS"}},113:function(e,t,a){e.exports={sidebar:"Main_sidebar__27C4l",content:"Main_content__3AO2u",wrapper:"Main_wrapper__3jR9U",row:"Main_row__AJOEi"}},160:function(e,t,a){e.exports={snapshot:"SnapshotSelector_snapshot__3T43n","dropdown-item":"SnapshotSelector_dropdown-item__34USS"}},161:function(e,t,a){e.exports={overview:"Item_overview__hHbwW",running:"Item_running__3TEcd",sleep:"Item_sleep__2W2ya",gym:"Item_gym__2AXra",name:"Item_name__3hHb0",link:"Item_link__1ZKgg"}},162:function(e,t,a){e.exports={label:"PieTooltip_label__3yicn",value:"PieTooltip_value__310zL",wrapper:"PieTooltip_wrapper__23jcp"}},164:function(e,t,a){e.exports={dropdown:"GraphTypeButton_dropdown__3_hkd",toggle:"GraphTypeButton_toggle__3r6i5",option:"GraphTypeButton_option__11Vke"}},165:function(e,t,a){e.exports={container:"NotFound_container__zt-TK",number:"NotFound_number__2l7zC",text:"NotFound_text__3TLZ_"}},195:function(e,t,a){e.exports={text:"Info_text__3s_XI",icon:"Info_icon__1w_HW"}},196:function(e,t,a){e.exports={container:"SleepDuration_container__2VlxU",icon:"SleepDuration_icon__f378Q"}},197:function(e,t,a){e.exports={active:"WakeMood_active__2bMpV",inactive:"WakeMood_inactive__2r3Rp"}},198:function(e,t,a){e.exports={desc:"Sleep_desc__IwNfB",link:"Sleep_link__1ylkj"}},242:function(e,t,a){e.exports={footer:"Footer_footer__h9NZX"}},244:function(e,t,a){e.exports={nav:"Menu_nav__3Jeql"}},245:function(e,t,a){e.exports={wrapper:"LoadingSpinner_wrapper__1A2zE",loading:"LoadingSpinner_loading__3UIDy",rings:"LoadingSpinner_rings__1Y7DY"}},247:function(e,t,a){"use strict";(function(e){var n=a(6),r=a(8),s=a(190),i=a.n(s),c=a(191),o=a.n(c),u=a(248),l=a.n(u),d=function(){function t(){Object(n.a)(this,t),this.dataDirectory=o.a.join(e.cwd(),"public/data")}return Object(r.a)(t,[{key:"read",value:function(e,t){var a=l.a.parse(this.getFileContents(e),{delimiter:t,header:!0,skipEmptyLines:!0,complete:function(e){return e.data}});return a.errors&&a.errors.forEach((function(e){console.log(e)})),a.data}},{key:"getFileContents",value:function(e){var t=i.a.readdirSync(this.dataDirectory).find((function(t){return t===e}));if(!t)throw new ReferenceError("Unknown File: "+e);var a=o.a.join(this.dataDirectory,t);return i.a.readFileSync(a,"utf8")}}]),t}();t.a=d}).call(this,a(127))},250:function(e,t,a){e.exports={label:"SleepQualityPieChart_label__2W3PR"}},277:function(e,t,a){},278:function(e,t,a){},279:function(e,t,a){},280:function(e,t,a){},35:function(e,t,a){e.exports={icon:"HealthInfo_icon__2ZW40",tooltipIcon:"HealthInfo_tooltipIcon__2yY4a",tooltip:"HealthInfo_tooltip__2qyeN",label:"HealthInfo_label__2ryBH",value:"HealthInfo_value__1eTWX",heading:"HealthInfo_heading__3hnp3"}},420:function(e,t,a){"use strict";a.r(t);var n,r=a(1),s=a(0),i=a.n(s),c=a(46),o=a.n(c),u=(a(276),a(277),a(278),a(279),a(280),a(281),a(282),a(89)),l=a(6),d=a(8),h=a(15),j=a(14),p=a(440),b=a(442),f=a(28),m=a(241),v=a(18),O=a.n(v),x=a(27),y=a(425);!function(e){e[e.SLEEP=0]="SLEEP"}(n||(n={}));var g=function(){function e(){Object(l.a)(this,e),this.dates=new Map}return Object(d.a)(e,[{key:"add",value:function(e,t){this.dates.set(e,t)}},{key:"getDates",value:function(e){return this.dates.has(e)?this.dates.get(e):[]}}]),e}(),_=a(160),k=a.n(_),S=a(238),N=a.n(S),w=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"get",value:function(){var t=Object(x.a)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.makeRestRequest("GET",void 0,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"post",value:function(){var t=Object(x.a)(O.a.mark((function t(a,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.makeRestRequest("POST",n,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"makeRestRequest",value:function(){var e=Object(x.a)(O.a.mark((function e(t,a,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.host){e.next=2;break}throw new ReferenceError("Host URI is not defined!");case 2:if(n){e.next=4;break}throw new ReferenceError("Endpoint is not defined!");case 4:return r=this.host+n,console.log("Sending "+t+" request to "+r),e.next=8,N()(r,{method:t,headers:{"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0}).then(function(){var e=Object(x.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,console.log("Sucessfully received "+t.status+" response",a),e.abrupt("return",{data:a,errors:[]});case 8:return e.abrupt("return",{data:void 0,errors:[new Error(t.statusText)]});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log("An error occurred while making a request to "+n,e),{data:void 0,errors:[new Error(e)]}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}();w.host="";var D=w,T=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"initialise",value:function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get("/initialise");case 2:if(!(t=e.sent).data){e.next=5;break}return e.abrupt("return",t.data);case 5:if(!t.errors){e.next=7;break}throw new Error(t.errors[0].message);case 7:throw new Error("Initialise Response is Null");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),I=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"convert",value:function(e){var t=new g;return t.add(n.SLEEP,e.snapshotDates.sleep),t}}]),e}(),R=function(){function e(){Object(l.a)(this,e),this.repository=new T,this.converter=new I}return Object(d.a)(e,[{key:"getSnapshotDates",value:function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.repository.initialise().catch((function(e){throw e}));case 2:return t=e.sent,e.abrupt("return",this.converter.convert(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),M=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).select=function(e){n.setState({selected:e,isDisabled:!0}),n.setState({isDisabled:!1})},n.state={data:new g,selected:"Snapshot",isDisabled:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(O.a.mark((function e(){var t=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new R).getSnapshotDates().then((function(e){return t.setState({data:e})})).catch((function(e){return t.setState({isDisabled:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isDisabled,a=e.selected,s="Stubbed";return Object(r.jsxs)(y.a,{title:this.getTitle(),id:"snapshot-dropdown",className:k.a.snapshot,onSelect:this.select,disabled:t,children:[Object(r.jsx)(y.a.Item,{className:k.a.selected,eventKey:s,children:" Most Recent "},s),Object(r.jsx)(y.a.Divider,{}),this.state.data.getDates(n.SLEEP).map((function(e){return Object(r.jsx)(y.a.Item,{className:k.a.date,eventKey:e,disabled:a===e,children:e},e)}))]})}},{key:"getTitle",value:function(){var e=this.state.selected;return this.context.latest===e?"Snapshot":e}}]),a}(s.Component),C=a(34),A=a(444),E=a(438),B=a(23),F=function(){function e(t,a,n){Object(l.a)(this,e),this.branch=void 0,this.hash=void 0,this.date=void 0,this.branch=t,this.hash=a,this.date=n}return Object(d.a)(e,[{key:"getBranch",value:function(){return this.branch}},{key:"getBranchURI",value:function(){return"https://github.com/TomPlum/activity-trends-api/tree/"+this.branch}},{key:"getHash",value:function(){return this.hash}},{key:"getCommitURI",value:function(){return"https://github.com/TomPlum/activity-trends-api/commit/"+this.hash}},{key:"getDate",value:function(){return this.date}}],[{key:"empty",value:function(){return new e("N/A","N/A","N/A")}}]),e}(),H=function(){function e(t){Object(l.a)(this,e),this.version=void 0,this.version=t}return Object(d.a)(e,[{key:"getVersion",value:function(){return this.version}}],[{key:"empty",value:function(){return new e("N/A")}}]),e}(),Q=function(){function e(t,a){Object(l.a)(this,e),this.gitInformation=void 0,this.buildInfo=void 0,this.gitInformation=t,this.buildInfo=a}return Object(d.a)(e,[{key:"getGitInfo",value:function(){return this.gitInformation}},{key:"getBuildInfo",value:function(){return this.buildInfo}}],[{key:"empty",value:function(){return new e(F.empty(),H.empty())}}]),e}(),W=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"read",value:function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get("/actuator/info");case 2:if(!(t=e.sent).data){e.next=5;break}return e.abrupt("return",t.data);case 5:if(!t.errors){e.next=7;break}throw new Error(t.errors[0].message);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),K=a(26),L=a.n(K),P=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"convert",value:function(t){var a=t.git,n=e.getGitInformation(a),r=a.build,s=new H(r.version);return new Q(n,s)}}],[{key:"getGitInformation",value:function(e){var t=e.commit,a=L.a.unix(t.time).format("DD/MM/YYYY");return new F(e.branch,t.id.abbrev,a)}}]),e}(),Y=function(){function e(){Object(l.a)(this,e),this.repository=new W,this.converter=new P}return Object(d.a)(e,[{key:"getInfo",value:function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.repository.read();case 2:return t=e.sent,e.abrupt("return",this.converter.convert(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),U=a(35),G=a.n(U),q=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderTooltip=function(e){var t=n.state.data,a=t.getGitInfo(),s=t.getBuildInfo();return Object(r.jsxs)(A.a,Object(C.a)(Object(C.a)({id:"health",className:G.a.tooltip},e),{},{children:[Object(r.jsxs)(A.a.Title,{className:G.a.heading,children:[Object(r.jsx)(f.a,{fixedWidth:!0,icon:B.j,className:G.a.tooltipIcon})," ","Latest Build"]}),Object(r.jsxs)(A.a.Content,{children:[Object(r.jsxs)("p",{className:G.a.label,children:["Branch:",Object(r.jsx)("a",{href:a.getBranchURI(),target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)("span",{className:G.a.value,children:a.getBranch()})})]}),Object(r.jsxs)("p",{className:G.a.label,children:["Hash:",Object(r.jsx)("a",{href:a.getCommitURI(),target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)("span",{className:G.a.value,children:a.getHash()})})]}),Object(r.jsxs)("p",{className:G.a.label,children:["Date:",Object(r.jsx)("span",{className:G.a.value,children:a.getDate()})]}),Object(r.jsxs)("p",{className:G.a.label,children:["Ver:",Object(r.jsx)("span",{className:G.a.value,children:s.getVersion()})]})]})]}))},n.renderErrorTooltip=function(e){return Object(r.jsxs)(A.a,Object(C.a)(Object(C.a)({id:"health",className:G.a.tooltip},e),{},{children:[Object(r.jsxs)(A.a.Title,{className:G.a.heading,children:[Object(r.jsx)(f.a,{fixedWidth:!0,icon:B.b})," ","Connectivity"]}),Object(r.jsx)(A.a.Content,{children:Object(r.jsxs)("p",{className:G.a.label,children:["Reason:",Object(r.jsx)("span",{className:G.a.value,children:n.state.error.toString()})]})})]}))},n.state={isActive:!1,data:Q.empty(),error:void 0},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(O.a.mark((function e(){var t=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Y).getInfo().then((function(e){return t.setState({data:e})})).catch((function(e){return t.setState({error:e})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.error;return Object(r.jsx)(E.a,{placement:"bottom",delay:{show:100,hide:2e3},overlay:e?this.renderErrorTooltip:this.renderTooltip,trigger:["hover","focus"],children:Object(r.jsx)(f.a,{fixedWidth:!0,className:e?G.a.tooltipIcon:G.a.icon,icon:e?B.g:B.l})})}}]),a}(s.Component),z=a(110),V=a.n(z),Z=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(r.jsxs)(p.a,{fixed:"top",className:V.a.header,children:[Object(r.jsxs)(p.a.Brand,{children:[Object(r.jsx)("img",{alt:"activity-rings-logo",src:"/activity-trends/logo.png",width:"30px",height:"30px",className:V.a.logo})," ",Object(r.jsx)("span",{className:V.a.name,children:"Activity Trends"})]}),Object(r.jsx)(p.a.Toggle,{}),Object(r.jsxs)(p.a.Collapse,{className:"justify-content-end",children:[Object(r.jsx)(q,{}),Object(r.jsx)(M,{}),Object(r.jsx)(b.a,{children:Object(r.jsx)(b.a.Link,{target:"_blank",href:"https://www.github.com/TomPlum",className:V.a.link,children:Object(r.jsx)(f.a,{icon:m.a,size:"lg",fixedWidth:!0,className:V.a.github})})})]})]})}}]),a}(s.Component),J=a(426),X=a(242),$=a.n(X),ee=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(r.jsx)(J.a,{fluid:!0,children:Object(r.jsx)(p.a,{fixed:"bottom",className:$.a.footer,children:Object(r.jsx)(p.a.Brand,{children:Object(r.jsxs)("span",{children:["Thomas Plumpton \xa9 ",a.getCurrentYear()]})})})})}}],[{key:"getCurrentYear",value:function(){return L()().year().toString()}}]),a}(s.Component),te=a(95),ae=a(161),ne=a.n(ae),re=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.icon,n=e.page,s=e.className;return Object(r.jsx)(b.a.Item,{children:Object(r.jsxs)(te.b,{to:n,className:ne.a.link,eventKey:t,children:[Object(r.jsx)(f.a,{icon:a,className:ne.a[s],fixedWidth:!0}),Object(r.jsx)("p",{className:ne.a.name,children:t})]})})}}]),a}(s.Component),se=a(244),ie=a.n(se),ce=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={active:void 0},n}return Object(d.a)(a,[{key:"render",value:function(){return Object(r.jsxs)(b.a,{activeKey:"/",className:ie.a.nav+" flex-column",children:[Object(r.jsx)(re,{name:"Overview",icon:B.k,page:"/",className:"overview"}),Object(r.jsx)(re,{name:"Running",icon:B.q,page:"/running",className:"running"}),Object(r.jsx)(re,{name:"Gym",icon:B.f,page:"/gym",className:"gym"}),Object(r.jsx)(re,{name:"Sleep",icon:B.o,page:"/sleep",className:"sleep"})]})}}]),a}(s.Component),oe=a(427),ue=a(428),le=a(31),de=a(47),he=a.n(de),je=function(){return Object(r.jsxs)("svg",{className:he.a.svg,viewBox:"0 0 37 37",children:[Object(r.jsxs)("g",{className:he.a.ring+" "+he.a.move,children:[Object(r.jsx)("circle",{className:he.a.background,cx:"50%",cy:"50%",r:"15.915",strokeWidth:"3"}),Object(r.jsx)("circle",{className:he.a.completed,cx:"50%",cy:"50%",r:"15.915",strokeWidth:"3",strokeDasharray:"100, 100"})]}),Object(r.jsxs)("g",{className:he.a.ring+" "+he.a.exercise,children:[Object(r.jsx)("circle",{className:he.a.background,cx:"50%",cy:"50%",r:"15.915",strokeWidth:"4"}),Object(r.jsx)("circle",{className:he.a.completed,cx:"50%",cy:"50%",r:"15.915",strokeWidth:"4",strokeDasharray:"100, 100"})]}),Object(r.jsxs)("g",{className:he.a.ring+" "+he.a.stand,children:[Object(r.jsx)("circle",{className:he.a.background,cx:"50%",cy:"50%",r:"15.915",strokeWidth:"6"}),Object(r.jsx)("circle",{className:he.a.completed,cx:"50%",cy:"50%",r:"15.915",strokeWidth:"6",strokeDasharray:"100, 100"})]})]})},pe=a(245),be=a.n(pe),fe=function(e){return e.active?Object(r.jsx)("div",{className:be.a.wrapper,children:Object(r.jsx)(je,{})}):null},me=a(445),ve=a(246),Oe=a.n(ve),xe=a(79),ye=a.n(xe),ge=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.title,n=e.icon,s=e.unit;return Object(r.jsx)(me.a,{className:ye.a.card,children:Object(r.jsxs)(oe.a,{className:ye.a.row,children:[Object(r.jsx)(ue.a,{lg:4,xs:4,children:Object(r.jsxs)("span",{className:"fa-layers fa-5x",children:[Object(r.jsx)(f.a,{icon:B.c,className:ye.a.circle}),Object(r.jsx)(f.a,{icon:n,className:ye.a.icon})]})}),Object(r.jsxs)(ue.a,{lg:8,xs:8,children:[t?Object(r.jsx)(Oe.a,{start:0,end:Number(t),suffix:s,duration:2,className:ye.a.value}):Object(r.jsx)("span",{className:ye.a.value,children:"N/A"}),Object(r.jsx)("h6",{className:ye.a.title,children:a})]})]})})}}]),a}(s.Component),_e=a(247),ke=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"convert",value:function(e){return e.map((function(e){return{startDate:e["Start Time"],endDate:e["End Time"],duration:Number(e["Duration (mins)"]),isNap:"YES"===e.Nap,sleepQuality:Number(e["Sleep Quality (%)"]),awakeTime:Number(e["Time Awake (mins)"]),remSleep:Number(e["Time in REM Slep (mins)"]),lightSleep:Number(e["Time in Light Sleep (mins)"]),deepSleep:Number(e["Time In Deep Sleep (mins)"]),soundsRecorded:Number(e["Sounds Recorded"]),mood:e["Wake-up mood"]}}))}},{key:"convertToMainGraphData",value:function(e){var t=e.map((function(e){var t=e.startDate.slice(0,-6),a=e.endDate.slice(0,-6);return{date:t,startTime:L()(t).format("HH:mm"),endTime:L()(a).format("HH:mm"),duration:e.duration/60,sleepQuality:e.sleepQuality,isNap:e.isNap,awakeTime:e.awakeTime/60,remSleep:e.remSleep/60,lightSleep:e.lightSleep/60,deepSleep:e.deepSleep/60,soundsRecorded:e.soundsRecorded,mood:e.mood}}));return this.filterInvalidData(t)}},{key:"convertInitialiseResponseData",value:function(e){return this.convertSnapshot(e.latestSnapshot).filter((function(e){return e.duration>3&&e.duration<12&&!e.isNap&&e.sleepQuality>0}))}},{key:"convertSnapshotData",value:function(e){var t=this.convertSnapshot(e);return this.filterInvalidData(t)}},{key:"filterInvalidData",value:function(e){return e.filter((function(e){return e.duration>3&&e.duration<12&&!e.isNap&&e.sleepQuality>0}))}},{key:"convertSnapshot",value:function(e){return e.sessions.map((function(e){var t=e.startDate.slice(0,-6),a=e.endDate.slice(0,-6),n=e.time;return{date:t,startTime:L()(t).format("HH:mm"),endTime:L()(a).format("HH:mm"),duration:e.duration/60,sleepQuality:e.quality,isNap:e.nap,awakeTime:n.awake/60,remSleep:n.rem/60,lightSleep:n.light/60,deepSleep:n.deep/60,soundsRecorded:e.soundsRecorded,mood:e.mood}}))}}]),e}(),Se=function(){function e(){Object(l.a)(this,e),this.reader=new _e.a,this.converter=new ke}return Object(d.a)(e,[{key:"read",value:function(){var e=this.reader.read("sleep.csv",", ");return this.converter.convert(e)}},{key:"initialise",value:function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get("/sleep/initialise");case 2:if(!(t=e.sent).data){e.next=5;break}return e.abrupt("return",t.data);case 5:if(!t.errors){e.next=7;break}throw new Error(t.errors[0].message);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getSnapshot",value:function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get("/sleep/snapshot/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ne=function(){function e(){Object(l.a)(this,e),this.repository=new Se,this.converter=new ke}return Object(d.a)(e,[{key:"initialise",value:function(){var e=Object(x.a)(O.a.mark((function e(){var t=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.repository.initialise().then((function(e){return t.converter.convertInitialiseResponseData(e)})).catch((function(e){return null}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSnapshot",value:function(){var e=Object(x.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.repository.getSnapshot(t);case 2:return a=e.sent,e.abrupt("return",this.converter.convertSnapshotData(a));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),we=a(99),De=a(443),Te=a(259),Ie=a(43),Re=a(167),Me=a(125),Ce=a(162),Ae=a.n(Ce);var Ee,Be=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={active:!1,payload:null},n}return Object(d.a)(a,[{key:"render",value:function(){var e,t=this.state,a=t.active,n=t.payload;return a?Object(r.jsx)("div",{className:Ae.a.wrapper,children:Object(r.jsxs)("p",{className:Ae.a.value,children:[Object(r.jsxs)("span",{className:Ae.a.label,children:[n[0].name,": "]}),(e=n[0].value,e.toFixed(1)+" hours")]})}):null}}]),a}(s.Component),Fe=a(441),He=function(e){var t=e.children;return Object(r.jsx)(Fe.a,{width:"100%",height:350,children:t})},Qe=a(250),We=a.n(Qe),Ke=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).getSectorColourMappings=function(e){return e.map((function(e,t){return Object(r.jsx)(we.a,{fill:e.fill},"cell-".concat(t))}))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.createGraphData();return Object(r.jsx)(He,{children:Object(r.jsxs)(De.a,{children:[Object(r.jsxs)(Te.a,{data:e,nameKey:"name",dataKey:"value",innerRadius:"40%",outerRadius:"90%",animationBegin:0,paddingAngle:5,children:[Object(r.jsx)(Ie.a,{className:We.a.label,position:"center",value:this.getSleepQualityLabel()}),this.getSectorColourMappings(e)]}),Object(r.jsx)(Re.a,{content:function(e){return Object(r.jsx)(Be,Object(C.a)({},e))}}),Object(r.jsx)(Me.a,{})]})})}},{key:"getSleepQualityLabel",value:function(){var e=this.props.data;return e&&e.sleepQuality?e.sleepQuality+"%":"N/A"}},{key:"createGraphData",value:function(){var e=this.props.data;return e?[{name:"Awake Time",value:e.awakeTime,fill:"rgba(247, 163, 52, 0.6)",stroke:"rgba(247, 163, 52, 1)"},{name:"REM Sleep",value:e.remSleep,fill:"rgba(240, 101, 210, 0.6)",stroke:"rgba(240, 101, 210, 1)"},{name:"Light Sleep",value:e.lightSleep,fill:"rgba(80, 217, 108, 0.6)",stroke:"rgba(80, 217, 108, 1)"},{name:"Deep Sleep",value:e.deepSleep,fill:"rgba(52, 179, 247, 0.6)",stroke:"rgba(52, 179, 247, 1)"}]:[]}}]),a}(s.Component),Le=a(81);!function(e){e.AREA="Area",e.SCATTER="Scatter",e.BAR="Bar",e.UNKNOWN="N/A"}(Ee||(Ee={}));var Pe=a(164),Ye=a.n(Pe),Ue=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).onSelect=function(e){n.setState({selectedType:e}),n.props.onChange(e)};var r=e.defaultType,s=e.options;return n.state={selectedType:r||(s?s[0]:Ee.UNKNOWN)},n}return Object(d.a)(a,[{key:"shouldComponentUpdate",value:function(e){return e.defaultType!==this.state.selectedType}},{key:"componentDidUpdate",value:function(e){var t=this.props.defaultType;e.defaultType!==t&&this.setState({selectedType:t})}},{key:"render",value:function(){var e=this.state.selectedType;return Object(r.jsxs)(Le.a,{className:Ye.a.dropdown,onSelect:this.onSelect,children:[Object(r.jsx)(Le.a.Toggle,{className:Ye.a.toggle,variant:"link",disabled:this.props.disabled,children:e}),Object(r.jsx)(Le.a.Menu,{children:this.props.options.filter((function(t){return t!==e})).map((function(e){return Object(r.jsx)(Le.a.Item,{className:Ye.a.option,eventKey:e,children:e},e)}))})]})}}]),a}(s.Component),Ge=a(432),qe=a(433),ze=a(72),Ve=a(73),Ze=a(106),Je=a(166),Xe=a(149),$e=a(80),et=a.n($e);var tt=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={active:!1,payload:null},n}return Object(d.a)(a,[{key:"render",value:function(){var e,t,a,n=this.state,s=n.active,i=n.payload;return s?Object(r.jsxs)("div",{className:et.a.wrapper,children:[Object(r.jsxs)("p",{className:et.a.value,children:[Object(r.jsx)("span",{className:et.a.label,children:"Date: "}),(a=i[0].value,L()(a).format("Mo MMM YYYY HH:MM"))]}),Object(r.jsxs)("p",{className:et.a.value,children:[Object(r.jsx)("span",{className:et.a.label,children:"Duration: "}),(t=i[1].value,t.toFixed(1)+" hours")]}),Object(r.jsxs)("p",{className:et.a.value,children:[Object(r.jsx)("span",{className:et.a.label,children:"Sleep Quality: "}),(e=i[2].value,e+"%")]})]}):null}}]),a}(s.Component),at=function e(){Object(l.a)(this,e)};at.min=function(e){return e.reduce((function(e,t){return e<t?e:t}))},at.max=function(e){return e.reduce((function(e,t){return e>t?e:t}))};var nt=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onClickScatter=function(e){n.props.onSelectedSession({data:{awakeTime:e.awakeTime,deepSleep:e.deepSleep,lightSleep:e.lightSleep,remSleep:e.remSleep,sleepQuality:e.sleepQuality},date:e.date,startTime:e.startTime,endTime:e.endTime,duration:e.duration,soundsRecorded:e.soundsRecorded,mood:e.mood})},n.getEarliestDate=function(){return n.props.data[0].date},n.state={brushStartIndex:n.getEarliestDate(),brushEndIndex:n.getBrushEndIndex()},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return Object(r.jsx)(He,{children:Object(r.jsxs)(Ge.a,{data:this.props.data,children:[Object(r.jsx)(qe.a,{strokeDasharray:"3 3"}),Object(r.jsx)(ze.a,{dataKey:"date",name:"Date",type:"category",tickFormatter:this.xAxisFormatter}),Object(r.jsx)(Ve.a,{dataKey:"duration",name:"Duration",type:"number",unit:" hrs",domain:this.yAxisDomain()}),Object(r.jsx)(Ze.a,{dataKey:"sleepQuality",range:[1,300],name:"Sleep Quality",unit:"%"}),Object(r.jsx)(Re.a,{cursor:{strokeDasharray:"3 3"},content:function(e){return Object(r.jsx)(tt,Object(C.a)({},e))}}),Object(r.jsx)(Je.a,{dataKey:"date",height:30,stroke:"#8884d8",tickFormatter:this.xAxisFormatter,endIndex:this.getBrushFilteredData().length,onChange:function(t){return e.setState({brushStartIndex:t.startIndex,brushEndIndex:t.endIndex})}}),Object(r.jsx)(Xe.a,{name:"Sleep Sessions",data:this.getBrushFilteredData(),fill:"rgba(136, 132, 216, 0.7)",onClick:this.onClickScatter,isAnimationActive:!0,className:null})]})})}},{key:"getBrushFilteredData",value:function(){var e=this.state,t=e.brushStartIndex,a=e.brushEndIndex;return this.props.data.filter((function(e){return new Date(e.date)>=new Date(t)&&new Date(e.date)<=new Date(a)}))}},{key:"getBrushEndIndex",value:function(){var e=this.props.data;return e[Math.round(e.length/5)].date}},{key:"yAxisDomain",value:function(){var e=this.props.data.map((function(e){return e.duration}));return[Math.floor(at.min(e)),Math.ceil(at.max(e))]}},{key:"xAxisFormatter",value:function(e){return L()(e).format("MMM YY")}}]),a}(s.Component),rt=a(434),st=a(150),it=a(111),ct=a.n(it);var ot,ut=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={active:!1,payload:null},n}return Object(d.a)(a,[{key:"render",value:function(){var e,t,a=this.state,n=a.active,s=a.payload;return n?Object(r.jsxs)("div",{className:ct.a.wrapper,children:[Object(r.jsxs)("p",{className:ct.a.value,children:[Object(r.jsx)("span",{className:ct.a.label,children:"Date: "}),(t=s[0].payload.date,L()(t).format("Mo MMM YYYY HH:MM"))]}),Object(r.jsxs)("p",{className:ct.a.value,children:[Object(r.jsx)("span",{className:ct.a.label,children:"Sleep Quality: "}),(e=s[0].value,e.toFixed(0)+"%")]})]}):null}}]),a}(s.Component),lt=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onClickArea=function(t){var a=t.payload;e.props.onSelectedSession({data:{awakeTime:a.awakeTime,deepSleep:a.deepSleep,lightSleep:a.lightSleep,remSleep:a.remSleep,sleepQuality:a.sleepQuality,mood:a.mood},date:a.date,startTime:a.startTime,endTime:a.endTime,soundsRecorded:a.soundsRecorded,duration:a.duration,mood:a.mood})},e.xAxisFormatter=function(e){return L()(e).format("MMM YY")},e.getBrushEndIndex=function(){return Math.round(e.props.data.length/10)},e}return Object(d.a)(a,[{key:"render",value:function(){return Object(r.jsx)(He,{children:Object(r.jsxs)(rt.a,{data:this.props.data,children:[Object(r.jsx)(qe.a,{strokeDasharray:"3 3"}),Object(r.jsx)(ze.a,{dataKey:"date",name:"Date",tickFormatter:this.xAxisFormatter}),Object(r.jsx)(Ve.a,{type:"number",name:"Sleep Quality",unit:"%",domain:this.yAxisDomain()}),Object(r.jsx)(Re.a,{content:function(e){return Object(r.jsx)(ut,Object(C.a)({},e))}}),Object(r.jsx)(st.a,{type:"monotone",dataKey:"sleepQuality",stroke:"#8884d8",fill:"#8884d8",activeDot:{onClick:this.onClickArea},animationDuration:2200}),Object(r.jsx)(Je.a,{dataKey:"date",height:30,stroke:"#8884d8",endIndex:this.getBrushEndIndex(),tickFormatter:this.xAxisFormatter})]})})}},{key:"yAxisDomain",value:function(){var e=this.props.data.map((function(e){return e.sleepQuality}));return[Math.floor(at.min(e))-5,Math.ceil(at.max(e))]}}]),a}(s.Component),dt=a(435),ht=a(195),jt=a.n(ht),pt=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderTooltip=function(e){return Object(r.jsx)(dt.a,Object(C.a)(Object(C.a)({className:jt.a.text},e),{},{children:n.props.text}))},n.state={isActive:!1},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return Object(r.jsx)(E.a,{placement:"right",delay:{show:100,hide:250},overlay:this.renderTooltip,children:Object(r.jsx)(f.a,{fixedWidth:!0,className:jt.a.icon,icon:B.l,onMouseEnter:function(){return e.setState({isActive:!0})},onMouseLeave:function(){return e.setState({isActive:!1})}})})}}]),a}(s.Component),bt=a(196),ft=a.n(bt),mt=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(r.jsx)(J.a,{className:ft.a.container,children:Object(r.jsx)(f.a,{icon:B.d,className:ft.a.icon})})}}]),a}(s.Component);!function(e){e.GREAT="Great",e.GOOD="Good",e.OK="Ok",e.NOT_SO_GOOD="Not Good",e.BAD="Bad",e.UNKNOWN="N/A"}(ot||(ot={}));var vt,Ot=a(197),xt=a.n(Ot),yt=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).getClass=function(t){return e.props.mood===t?xt.a.active:xt.a.inactive},e}return Object(d.a)(a,[{key:"render",value:function(){return Object(r.jsxs)(J.a,{children:[Object(r.jsx)(f.a,{icon:B.i,className:this.getClass(ot.GREAT)}),Object(r.jsx)(f.a,{icon:B.r,className:this.getClass(ot.GOOD)}),Object(r.jsx)(f.a,{icon:B.m,className:this.getClass(ot.OK)}),Object(r.jsx)(f.a,{icon:B.h,className:this.getClass(ot.NOT_SO_GOOD)}),Object(r.jsx)(f.a,{icon:B.t,className:this.getClass(ot.BAD)})]})}}]),a}(s.Component),gt=a(446);function _t(e){return e>=vt.LOWER&&e<vt.MIDDLE?vt.LOWER:e>=vt.MIDDLE&&e<vt.UPPER?vt.MIDDLE:e>=vt.UPPER?vt.UPPER:vt.FLOOR}!function(e){e[e.UPPER=30]="UPPER",e[e.MIDDLE=10]="MIDDLE",e[e.LOWER=5]="LOWER",e[e.FLOOR=0]="FLOOR"}(vt||(vt={}));var kt=a(90),St=a.n(kt),Nt=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).getClass=function(t){return _t(e.props.quantity)===t?St.a.active:St.a.inactive},e}return Object(d.a)(a,[{key:"render",value:function(){return Object(r.jsx)(J.a,{children:Object(r.jsxs)(oe.a,{children:[Object(r.jsx)(ue.a,{xs:3,className:St.a.column,children:Object(r.jsx)(f.a,{icon:B.u,fixedWidth:!0,className:this.getClass(vt.FLOOR)})}),Object(r.jsx)(ue.a,{xs:6,className:St.a.middleColumn,children:Object(r.jsx)(gt.a,{now:this.getBarFillPercentage(),className:St.a.bar})}),Object(r.jsx)(ue.a,{xs:3,className:St.a.column,children:Object(r.jsx)(f.a,{icon:B.v,fixedWidth:!0,className:this.getClass(vt.UPPER)})})]})})}},{key:"getBarFillPercentage",value:function(){switch(_t(this.props.quantity)){case vt.FLOOR:return 0;case vt.LOWER:return 25;case vt.MIDDLE:return 50;case vt.UPPER:return 75;default:return 0}}}]),a}(s.Component),wt=a(57),Dt=a.n(wt),Tt=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.data||{},t=e.soundsRecorded,a=e.mood,n=e.duration;return Object(r.jsxs)(J.a,{className:Dt.a.container,children:[Object(r.jsxs)(oe.a,{className:Dt.a.row,children:[Object(r.jsx)(ue.a,{xs:8,children:Object(r.jsx)(Nt,{quantity:t})}),Object(r.jsxs)(ue.a,{xs:4,children:[Object(r.jsx)("h1",{className:Dt.a.value,children:t||"N/A"}),Object(r.jsx)("h5",{className:Dt.a.title,children:"Sounds Recorded"})]})]}),Object(r.jsxs)(oe.a,{className:Dt.a.row,children:[Object(r.jsx)(ue.a,{xs:8,children:Object(r.jsx)(yt,{mood:a})}),Object(r.jsxs)(ue.a,{xs:4,children:[Object(r.jsx)("h1",{className:Dt.a.value,children:a||"N/A"}),Object(r.jsx)("h5",{className:Dt.a.title,children:"Wake-Up Mood"})]})]}),Object(r.jsxs)(oe.a,{className:Dt.a.row,children:[Object(r.jsx)(ue.a,{xs:8,children:Object(r.jsx)(mt,{duration:n})}),Object(r.jsxs)(ue.a,{xs:4,children:[Object(r.jsx)("h1",{className:Dt.a.value,children:n?n.toFixed(1)+"h":"N/A"}),Object(r.jsx)("h5",{className:Dt.a.title,children:"Duration Slept"})]})]})]})}}]),a}(s.Component),It=a(436),Rt=a(151),Mt=a(112),Ct=a.n(Mt);var At=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={active:!1,payload:null},n}return Object(d.a)(a,[{key:"render",value:function(){var e,t,a=this.state,n=a.active,s=a.payload;return n?Object(r.jsxs)("div",{className:Ct.a.wrapper,children:[Object(r.jsxs)("p",{className:Ct.a.value,children:[Object(r.jsx)("span",{className:Ct.a.label,children:"Date: "}),(t=s[0].payload.date,L()(t).format("Mo MMM YYYY HH:MM"))]}),Object(r.jsxs)("p",{className:Ct.a.value,children:[Object(r.jsx)("span",{className:Ct.a.label,children:"Sleep Quality: "}),(e=s[0].value,e.toFixed(0)+"%")]})]}):null}}]),a}(s.Component),Et=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onClickBar=function(t){var a=t.payload;e.props.onSelectedSession({data:{awakeTime:a.awakeTime,deepSleep:a.deepSleep,lightSleep:a.lightSleep,remSleep:a.remSleep,sleepQuality:a.sleepQuality,mood:a.mood},date:a.date,startTime:a.startTime,endTime:a.endTime,soundsRecorded:a.soundsRecorded,duration:a.duration,mood:a.mood})},e.xAxisFormatter=function(e){return L()(e).format("MMM YY")},e.getBrushEndIndex=function(){return Math.round(e.props.data.length/20)},e}return Object(d.a)(a,[{key:"render",value:function(){return Object(r.jsx)(He,{children:Object(r.jsxs)(It.a,{data:this.props.data,children:[Object(r.jsx)(qe.a,{strokeDasharray:"3 3"}),Object(r.jsx)(ze.a,{dataKey:"date",name:"Date",tickFormatter:this.xAxisFormatter}),Object(r.jsx)(Ve.a,{unit:"%",name:"Sleep Quality"}),Object(r.jsx)(Re.a,{content:function(e){return Object(r.jsx)(At,Object(C.a)({},e))}}),Object(r.jsx)(Je.a,{dataKey:"date",height:30,stroke:"#8884d8",endIndex:this.getBrushEndIndex(),tickFormatter:this.xAxisFormatter}),Object(r.jsx)(Rt.a,{dataKey:"sleepQuality",fill:"rgba(136, 132, 216, 0.6)",stroke:"#8884d8",onClick:this.onClickBar,animationDuration:2200})]})})}}]),a}(s.Component),Bt=a(156),Ft=function e(){Object(l.a)(this,e)};Ft.randomInt=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};var Ht=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).shift=function(){return n.setState((function(){return{data:n.getFakeData()}}))},n.xAxisFormatter=function(e){return L()(e).format("MMM YY")},n.state={timeout:void 0,data:[]},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.shift(),this.setState({timeout:setInterval((function(){return e.shift()}),this.props.speed)})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timeout)}},{key:"render",value:function(){var e=this.props,t=e.colour,a=e.speed;return Object(r.jsx)(He,{children:Object(r.jsxs)(rt.a,{data:this.state.data,children:[Object(r.jsx)(qe.a,{strokeDasharray:"3 3"}),Object(r.jsx)(ze.a,{dataKey:"date",name:"Date",tickFormatter:this.xAxisFormatter}),Object(r.jsx)(Ve.a,{type:"number",name:"Sleep Quality",unit:"%"}),Object(r.jsx)(st.a,{type:"monotone",dataKey:"value",stroke:t,fill:t,animationDuration:a,animationEasing:"ease-in-out",fillOpacity:.4})]})})}},{key:"getFakeData",value:function(){var e=this.props,t=e.sampleSize,a=e.dataBounds;return Object(Bt.a)(Array(t).keys()).map((function(e){return{value:Ft.randomInt(a[0],a[1]),date:L()().add(e,"month").toString()}}))}}]),a}(s.Component),Qt=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"gradient",value:function(t,a,n){for(var r=e.convertToRGB(t),s=e.convertToRGB(a),i=n,c=0,o=[],u=0;u<i;u++){var l=[];c+=1/i,l[0]=r[0]*c+(1-c)*s[0],l[1]=r[1]*c+(1-c)*s[1],l[2]=r[2]*c+(1-c)*s[2],o.push(e.convertToHex(l))}return o}},{key:"hex",value:function(e){var t="0123456789abcdef",a=parseInt(e);return 0===a||isNaN(e)?"00":(a=Math.round(Math.min(Math.max(0,a),255)),t.charAt((a-a%16)/16)+t.charAt(a%16))}},{key:"convertToHex",value:function(t){return"#"+e.hex(t[0])+e.hex(t[1])+e.hex(t[2])}},{key:"convertToRGB",value:function(t){var a=[];return a[0]=parseInt(e.trim(t).substring(0,2),16),a[1]=parseInt(e.trim(t).substring(2,4),16),a[2]=parseInt(e.trim(t).substring(4,6),16),a}}]),e}();Qt.trim=function(e){return"#"===e.charAt(0)?e.substring(1,7):e};var Wt=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).shift=function(){return n.setState((function(){return{data:n.getFakeData()}}))},n.getSectorColourMappings=function(e){return e.map((function(e,t){return Object(r.jsx)(we.a,{fill:e.fill},"cell-".concat(t))}))},n.state={timeout:void 0,data:[]},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.shift(),this.setState({timeout:setInterval((function(){return e.shift()}),this.props.speed)})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timeout)}},{key:"render",value:function(){var e=this.state.data;return Object(r.jsx)(He,{children:Object(r.jsx)(De.a,{children:Object(r.jsx)(Te.a,{data:e,nameKey:"name",dataKey:"value",innerRadius:"25%",animationBegin:0,animationDuration:this.props.speed,animationEasing:"ease-in-out",paddingAngle:2,fillOpacity:.4,outerRadius:"100%",children:this.getSectorColourMappings(e)})})})}},{key:"getFakeData",value:function(){var e=this.props,t=e.sectors,a=e.range,n=e.gradient,r=Qt.gradient(n[0],n[1],t);return Object(Bt.a)(Array(t).keys()).map((function(e){return{name:L()().add(e,"month").toString(),value:Ft.randomInt(a[0],a[1]),fill:r[e]}}))}}]),a}(s.Component),Kt=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onClickSleepSession=function(e){var t=e.data,a=e.date,r=e.startTime,s=e.endTime,i=e.soundsRecorded,c=e.duration,o=e.mood;n.setState({selectedSessionData:t,selectedSession:{date:a,startTime:r,endTime:s,miscInfo:{soundsRecorded:i,mood:o,duration:c}}})},n.state={selectedSessionData:void 0,selectedSession:void 0,selectedGraphType:Ee.UNKNOWN},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.data;this.setState({selectedSessionData:e?this.getMostRecentSleepSessionData():void 0,selectedSession:e?this.getMostRecentSleepSession():void 0,selectedGraphType:e?Ee.AREA:Ee.UNKNOWN})}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedGraphType,n=t.selectedSession,s=t.selectedSessionData;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(oe.a,{children:Object(r.jsx)(ue.a,{xs:12,children:Object(r.jsx)(me.a,{children:Object(r.jsxs)(me.a.Body,{children:[Object(r.jsxs)(me.a.Title,{children:[" Sleep Quality vs Duration",Object(r.jsx)(pt,{text:"Click a data point on the graph to display that session in detail below."}),Object(r.jsx)(Ue,{options:[Ee.SCATTER,Ee.AREA,Ee.BAR],onChange:function(t){return e.setState({selectedGraphType:t})},defaultType:a,disabled:!this.props.data})]}),this.renderLeadingGraph()]})})})}),Object(r.jsxs)(oe.a,{children:[Object(r.jsx)(ue.a,{md:6,sm:12,children:Object(r.jsx)(me.a,{children:Object(r.jsxs)(me.a.Body,{children:[Object(r.jsx)(me.a.Title,{children:this.formatDateTitle()}),this.props.data?Object(r.jsx)(Ke,{data:s}):Object(r.jsx)(Wt,{gradient:["#8884d8","#342de5"],speed:2e3,sectors:6,range:[5,25]})]})})}),Object(r.jsx)(ue.a,{md:6,sm:12,children:Object(r.jsx)(me.a,{children:Object(r.jsxs)(me.a.Body,{children:[Object(r.jsx)(me.a.Title,{children:"Miscellaneous Information"}),Object(r.jsx)(Tt,{data:n?n.miscInfo:null})]})})})]})]})}},{key:"formatDateTitle",value:function(){var e=this.state.selectedSession;if(!e)return"Session Breakdown";var t=e.date,a=e.startTime,n=e.endTime;return L()(t).format("dddd Do MMMM YYYY")+" ("+a+" - "+n+")"}},{key:"getMostRecentSleepSessionData",value:function(){var e=this;return this.props.data.find((function(t){return t.date===e.getMostRecentSleepSession().date}))}},{key:"getMostRecentSleepSession",value:function(){var e=this.props.data.reduce((function(e,t){return new Date(e.date)>new Date(t.date)?e:t}));return{date:e.date,startTime:e.startTime,endTime:e.endTime,miscInfo:{soundsRecorded:e.soundsRecorded,mood:e.mood,duration:e.duration}}}},{key:"renderLeadingGraph",value:function(){var e=this.props.data;switch(this.state.selectedGraphType){case Ee.SCATTER:return Object(r.jsx)(nt,{data:e,onSelectedSession:this.onClickSleepSession});case Ee.AREA:return Object(r.jsx)(lt,{data:e,onSelectedSession:this.onClickSleepSession});case Ee.BAR:return Object(r.jsx)(Et,{data:e,onSelectedSession:this.onClickSleepSession});case Ee.UNKNOWN:return Object(r.jsx)(Ht,{colour:"#8884d8",speed:3e3,sampleSize:10,dataBounds:[25,95]})}}}]),a}(s.Component),Lt=a(70),Pt=a.n(Lt);function Yt(){var e=[B.p,B.e,B.s];return e[Ft.randomInt(0,e.length-1)]}function Ut(){var e=["Oops!","Oh No!","Chotto Matte!","Nani?!"];return e[Ft.randomInt(0,e.length-1)]}var Gt=function(e){return e.active?Object(r.jsx)("div",{className:Pt.a.container,children:Object(r.jsxs)("div",{className:Pt.a.wrapper,children:[Object(r.jsxs)("h3",{className:Pt.a.heading,children:[Object(r.jsx)(f.a,{icon:Yt(),className:Pt.a.headingIcon})," ",Ut()]}),Object(r.jsx)("div",{className:Pt.a.break}),Object(r.jsx)("h4",{className:Pt.a.subtitle,children:"No data was received"}),Object(r.jsxs)("span",{className:Pt.a.description,children:["See the status"," ",Object(r.jsx)(f.a,{icon:B.g,className:Pt.a.referenceIcon})," ","at the top right for more information"]})]})}):null},qt=a(198),zt=a.n(qt),Vt=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={sleepData:void 0,loading:!0},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,(new Ne).initialise();case 3:t=e.sent,this.setState({sleepData:t,loading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.sleepData,a=e.loading;return Object(r.jsxs)(J.a,{fluid:!0,children:[Object(r.jsx)(fe,{active:a}),Object(r.jsx)(Gt,{active:!a&&!t}),Object(r.jsxs)("p",{className:zt.a.desc,children:["Visualising the data recorded by the iOS",Object(r.jsx)("a",{href:"https://pillow.app/",target:"_blank",rel:"noreferrer",className:zt.a.link,children:" Pillow "}),"app from my Apple watch."]}),Object(r.jsxs)(oe.a,{children:[Object(r.jsx)(ue.a,{lg:3,md:6,sm:12,children:Object(r.jsx)(ge,{title:"Sessions",value:this.getSleepSessionQuantity(),icon:B.a})}),Object(r.jsx)(ue.a,{lg:3,md:6,sm:12,children:Object(r.jsx)(ge,{title:"Avg Quality",value:this.getAvgSleepQuality(),unit:"%",icon:B.r})}),Object(r.jsx)(ue.a,{lg:3,md:6,sm:12,children:Object(r.jsx)(ge,{title:"Hours Slept",value:this.getTotalHoursSlept(),icon:B.d})}),Object(r.jsx)(ue.a,{lg:3,md:6,sm:12,children:Object(r.jsx)(ge,{title:"Sounds Recorded",value:this.getSoundsSum(),icon:B.n})})]}),Object(r.jsx)(Kt,{data:t},""+a)]})}},{key:"getAvgSleepQuality",value:function(){if(!this.state.sleepData)return 0;var e=this.state.sleepData.map((function(e){return e.sleepQuality})).reduce((function(e,t){return e+t}),0);return Number((e/this.getSleepSessionQuantity()).toFixed(1))}},{key:"getSleepSessionQuantity",value:function(){var e=this.state.sleepData;return e?e.length:0}},{key:"getTotalHoursSlept",value:function(){var e=this.state.sleepData;if(!e)return 0;var t=e.map((function(e){return e.duration})).reduce((function(e,t){return e+t}),0);return Math.round(t)}},{key:"getSoundsSum",value:function(){var e=this.state.sleepData;if(!e)return 0;var t=e.map((function(e){return e.soundsRecorded})).reduce((function(e,t){return e+t}),0);return Math.round(t)}}]),a}(s.Component),Zt=a(437),Jt=a(264),Xt=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(r.jsx)(J.a,{children:Object(r.jsx)(Fe.a,{width:"100%",height:350,children:Object(r.jsxs)(Zt.a,{height:325,data:this.extractOverviewData(),children:[Object(r.jsx)(ze.a,{dataKey:"Date",angle:-45,textAnchor:"end"}),Object(r.jsx)(Ve.a,{domain:[0,1200]}),Object(r.jsx)(Re.a,{}),Object(r.jsx)(Me.a,{}),Object(r.jsx)(qe.a,{stroke:"#f5f5f5"}),Object(r.jsx)(st.a,{type:"monotone",dataKey:"Duration",fill:"#8884d8",stroke:"#8884d8"}),Object(r.jsx)(Rt.a,{dataKey:"Calories Burnt",barSize:4}),Object(r.jsx)(Jt.a,{type:"monotone",dataKey:"Average Heart Rate",stroke:"#ff7300"})]})})})}},{key:"extractOverviewData",value:function(){return this.props.data.filter((function(e){return e.Duration&&e["Average Heart Rate"]&&e["Total Energy"]&&e.Start})).map((function(e){var t=Object.keys(e).filter((function(e){return["Duration","Average Heart Rate","Total Energy","Start"].includes(e)})).reduce((function(t,a){return t[a]=e[a],t}),{});return{Duration:t.Duration.split(":")[1],"Average Heart Rate":Number(t["Average Heart Rate"]).toFixed(2),"Calories Burnt":Number(t["Total Energy"]).toFixed(2),Date:t.Start.split(" ")[0]}})).slice(0,50)}}]),a}(s.Component),$t=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={workouts:void 0},n}return Object(d.a)(a,[{key:"componentWillMount",value:function(){var e=Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({workouts:void 0});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.workouts;return Object(r.jsxs)(J.a,{fluid:!0,children:[Object(r.jsx)("p",{children:"This is the overview page."}),Object(r.jsx)(me.a,{children:Object(r.jsx)(me.a.Body,{children:e&&Object(r.jsx)(Xt,{data:e})})})]})}}]),a}(s.Component),ea=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(r.jsx)(J.a,{fluid:!0,children:Object(r.jsx)("p",{children:"This is the running page."})})}}]),a}(s.Component),ta=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(r.jsx)(J.a,{fluid:!0,children:Object(r.jsx)("p",{children:"This is the gym page."})})}}]),a}(s.Component),aa=a(165),na=a.n(aa),ra=function(){return Object(r.jsxs)(J.a,{fluid:!0,className:na.a.container,children:[Object(r.jsx)("h1",{className:na.a.number,children:"404"}),Object(r.jsx)("h3",{className:na.a.text,children:"Page not found."})]})},sa=a(109),ia=a.n(sa);ia.a.configure({showSpinner:!1,easing:"ease"});var ca=function(e){return i.a.useState(ia.a.start()),i.a.useEffect((function(){return ia.a.done(),function(){return ia.a.start()}})),Object(r.jsx)(le.a,Object(C.a)({},e))},oa=a(113),ua=a.n(oa),la=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(r.jsxs)(J.a,{fluid:!0,className:ua.a.wrapper,children:[Object(r.jsx)(oe.a,{className:ua.a.row,children:Object(r.jsx)(Z,{})}),Object(r.jsxs)(oe.a,{className:ua.a.row,children:[Object(r.jsx)("div",{className:ua.a.sidebar,children:Object(r.jsx)(ce,{})}),Object(r.jsx)(ue.a,{className:ua.a.content,children:Object(r.jsxs)(le.c,{children:[Object(r.jsx)(ca,{path:"/",component:$t,exact:!0}),Object(r.jsx)(ca,{path:"/running",component:ea}),Object(r.jsx)(ca,{path:"/gym",component:ta}),Object(r.jsx)(ca,{path:"/sleep",component:Vt}),Object(r.jsx)(ca,{component:ra})]})})]}),Object(r.jsx)(ee,{})]})}}]),a}(s.Component),da=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={hasError:!1,error:null},n}return Object(d.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e})}},{key:"render",value:function(){return this.state.hasError?Object(r.jsxs)(J.a,{children:[Object(r.jsx)("h1",{children:"It do be broken."}),Object(r.jsx)("h2",{children:this.state.error})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(s.Component);u.a.autoAddCss=!1;var ha=function(e){var t;return Object(r.jsx)(te.a,{basename:"/activity-trends/",children:Object(r.jsx)(da,{children:Object(r.jsx)(la,{})},null===(t=e.location)||void 0===t?void 0:t.pathName)})};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(ha,{})}),document.getElementById("root"))},47:function(e,t,a){e.exports={svg:"ActivityRings_svg__3xMpO",ring:"ActivityRings_ring__1EcWw",completed:"ActivityRings_completed__2umDB",RingProgress:"ActivityRings_RingProgress__20VZO",move:"ActivityRings_move__2SKMQ",background:"ActivityRings_background__28Tnz",exercise:"ActivityRings_exercise__11PvZ",stand:"ActivityRings_stand__13D_z"}},57:function(e,t,a){e.exports={container:"MiscInfo_container__s9ssh",row:"MiscInfo_row__9KiXf",value:"MiscInfo_value__4jS53",icon:"MiscInfo_icon__2uXUg"}},70:function(e,t,a){e.exports={container:"DisabledOverlay_container__16IFv",wrapper:"DisabledOverlay_wrapper__q9yIP",heading:"DisabledOverlay_heading__35RZE",referenceIcon:"DisabledOverlay_referenceIcon__efsK1",headingIcon:"DisabledOverlay_headingIcon__1siV3",subtitle:"DisabledOverlay_subtitle__3M5_h",description:"DisabledOverlay_description__2rUo2",break:"DisabledOverlay_break__51iVw"}},79:function(e,t,a){e.exports={icon:"SleepInfoCard_icon__Hmh5r",circle:"SleepInfoCard_circle__1BRq-",value:"SleepInfoCard_value__1sEjn",title:"SleepInfoCard_title__3xRaZ",row:"SleepInfoCard_row__37Zfv",card:"SleepInfoCard_card__2jqpn"}},80:function(e,t,a){e.exports={label:"ScatterTooltip_label__2wU6a",value:"ScatterTooltip_value__1K7gi",wrapper:"ScatterTooltip_wrapper__2MhtB"}},90:function(e,t,a){e.exports={active:"SoundsRecorded_active__3pEt8",inactive:"SoundsRecorded_inactive__1u9J1",column:"SoundsRecorded_column__16RtC",middleColumn:"SoundsRecorded_middleColumn__232YJ",bar:"SoundsRecorded_bar__rX0zo"}}},[[420,1,2]]]);
//# sourceMappingURL=main.f5bf4be9.chunk.js.map